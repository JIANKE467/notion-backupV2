系统调用是提供内核服务的接口

（要想执行特权指令需要使用系统调用，而非使用越权的指令）

### 系统调用与库函数的区别

一个程序可以用汇编直接使用系统调用

也可以使用库函数间接使用系统调用（库函数直接使用系统调用）

![image](./../assets/img_2465a2dd-8276-80a5-bd4f-c9e9c5ec226e.png)

### 为什么要系统调用

例：当多个进程同时使用一种设备资源（如摄像头）需要内核决定使用顺序，否则会出现争抢摄像头的情况

### 什么功能要系统调用

![image](./../assets/img_2465a2dd-8276-80be-b4f9-cc2253ae0302.png)

### 系统调用过程

传参指令……（用户态）→陷入指令（用户态）[引发中断]→中断处理程序（内核态）[选择相应的系统调用处理程序]→相应系统调用处理程序（由传入的参数决定）

![image](./../assets/img_2465a2dd-8276-80be-9c37-c5e9c745176d.png)

ps：陷入指令=访管指令=trap指令

### 总结

![image](./../assets/img_2465a2dd-8276-80a9-903f-f5d92cccc73a.png)

