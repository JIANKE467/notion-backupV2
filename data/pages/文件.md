FILE*是c语言的又一种数据类型

（文件指针型）（常见的有整形，浮点型…）



注意⚠️：由于文件的类型是“文件指针型”所以使用文件句柄时无需带*

注意⚠️：虽然文件文件以指针定义，但文件的指针叫句柄，文件内的位置叫文件指针

## 文件的声明（c语言中所有东西都是先声明后使用）

c语言用指针指向文件以声明文件：（定义一个文件指针类型的指针）

```c
FILE *p;//类型名*指针名
```

其中FILE*是数据类型，p是指向文件的指针名

## 文件的操作1

将文件的操作函数赋值给相应指针，即可实现文件的操作

以下是文件的操作函数

![image](./../assets/img_20f5a2dd-8276-8058-8fc2-ece105220cc5.jpg)

例

```c
*p=fopen();
```

## 文件的操作2

以下说明了文件的操作函数的参数如何书写

### fopen 打开

```c
fopen("文件名","模式");
```

打开文件可写为

```c
FILE*fp=fopen("文件名","模式");
```

其中常用模式有:

r（读取）

w（写入）

a（追加）

这些只能操作文本文件

操作二进制文件需要在后面加b：

rb（读取）（如果文件不存在，返回NULL,存在，则返回相应文件的标识符）

wb（写入）（如果文件不存在，就创建,如果文件存在就清空文件中所有内容）

ab（追加）（如果文件不存在，就创建，如果文存在将文件指针偏移到最末尾）



ps：fopen返回的标识符就是指针

### fwrite 写入



```c
fwrite (写入内容,写入大小,写入次数,文件句柄);
```

其中：写入内容可以是指针，也可以是字符串（要带双引号）

文件位置是待写入文件句柄



### fclose 关闭

```c
fclose (文件句柄);
```

成功返回0

### fflush 清空文件写入缓冲区

当写入数据至文件时，数据不会被立刻写入，而是会等

1. 缓冲区满
1. 文件关闭
1. 进程结束
再写入，

使用fflush可手动写入当前缓冲区的内容至文件

格式：

```c
fflush(相应文件的句柄)
```

### fseek 文件指针偏移

```c
fseek(文件句柄,偏移量,偏移位置);
```

其中，

1. 偏移量为正往右偏移，为负往左偏
1. 偏移位置只有三个：SEEK_END(末尾），SEEK_SET(起始），SEEK_CUR(当前位置）
### ftell 计算文件指针偏移量

从文件起始开始计算当前文件指针偏移字节数

```c
ftell(文件句柄);
```





注意⚠️：函数参数中包含文件句柄的不需要将函数赋值给文件句柄，不包含则需要赋值给文件句柄（换言之只有fopen需要赋值给句柄）

